---
title: 'Next.js로 블로그 만들기'
date: '2025-11-15'
thumbnail: '/thumbnails/blog.png'
categories: ['Next.js']
description: 'Next.js로 정적 블로그 제작 과정을 기록합니다.'
---

> Next 16.0.1 버전을 기준으로 작성되었습니다.

<Callout>
  전체 코드는 [Github](https://github.com/yssccc/blog)에서 확인하실 수 있습니다.
</Callout>

## 기술 스택

| 항목       | STACK                     |
| ---------- | ------------------------- |
| 프레임워크 | Next.js (App Router)      |
| 언어       | TypeScript                |
| 마크업     | MDX                       |
| 스타일     | Tailwind CSS + Typography |
| 댓글       | Giscus                    |
| 배포       | Vercel                    |

`Next.js` - 블로그에서 중요한 SEO(검색 엔진 최적화)를 효과적으로 적용할 수 있고 정적 사이트 생성(SSG)와 서버사이드 렌더링(SSR)을 모두 지원합니다.

`MDX` - MDX(Markdown + JSX)는 마크다운 내에서 React 컴포넌트를 직접 사용할 수 있는 포맷입니다. 문서 작성은 마크다운을 활용하고, 필요한 부분에 React 컴포넌트로 스타일링을 추가할 수 있습니다.

`Giscus` - GitHub Discussions 기반의 오픈소스 댓글 서비스로 별도의 DB나 서버 없이 사용할 수 있습니다.

`Tailwind` - 빠르게 개발할 수 있고 반응형 디자인이 간편합니다.

`Vercel` - Vercel은 Next.js 공식 배포 플랫폼으로 호환성이 높습니다.

## 간략한 디렉토리 구조

```jsx
.
├── app
│   ├── globals.css
│   ├── layout.tsx
│   ├── page.tsx
│   └── posts
│       └── [slug]/
│           └── page.tsx // MDX 게시글을 slug 기반으로 렌더링하는 동적 라우트
│
├── components/
│   └── ... (컴포넌트 파일들)
├── content/
│   └── ... (블로그 글 MDX 파일들)
│
├── lib/
│   ├── formatDate.ts // 날짜 포맷 유틸
│   ├── getHeadingsFromMDX.ts // 목차(Heading) 추출 로직
│   ├── mdxOptions.ts // remark/rehype 등 MDX 설정
│   └── posts.ts // MDX 파일 읽기/파싱, slug 처리
│
├── types/
│   └── post.ts // 타입 정의
│

```

## 글 저장

글은 프로젝트 /content 폴더에 .mdx파일로 저장합니다.

```jsx
/content
 ├─ nextjs-blog-1.mdx
 ├─ nextjs-blog-2.mdx
 └─ nextjs-blog-3.mdx

```

mdx파일은 아래와 같이 **frontmatter+본문**으로 구성됩니다.

```
---
title: 'Next.js로 블로그 만들기'
date: '2025-11-17'
thumbnail: '/thumbnails/blog.png'
categories: ['Next.js']
description: 'Next.js로 정적 블로그 제작 과정을 기록합니다.'
---

## 내용
MDX 기반 블로그는…
```

## MDX파일 읽고 파싱하기

MDX를 읽으려면 파일의 **메타데이터를 분리**해야합니다.
이를 위해 `gray-matter`라는 라이브러리를 사용합니다.

### ✔ gray-matter가 하는 일

- `---` 안의 frontmatter는 **data**로 파싱
- 그 아래 마크다운/MDX 본문은 **content**로 보관
- 이후 페이지 컴포넌트에서 데이터를 사용하기 쉽게 분리됨

### ✔ 설치 명령어

```bash
npm install gray-matter
```

mdx파일이 아래와 같은 형식으로 반환됩니다.

```jsx
{
  data: {
    title: "Next.js로 블로그 만들기",
    date: "2025-11-17",
    thumbnail: "/thumbnails/blog.png",
    categories: ["Next.js"],
    description: "Next.js로 정적 블로그 제작 과정을 기록합니다."
  },
  content: "## 내용\\nMDX 기반 블로그는…",
}

```

더 명시적인 이름으로 사용하기 위해 **data를 frontmatter로 변경**해서 사용했습니다.

```tsx {15}
// lib/posts.ts
import matter from 'gray-matter';
import fs from 'fs';
import path from 'path';

const CONTENT_DIR = path.join(process.cwd(), 'content');

export function getPostBySlug(slug: string) {
  const fullPath = path.join(CONTENT_DIR, `${slug}.mdx`);
  const file = fs.readFileSync(fullPath, 'utf8');
  const { data, content } = matter(file);

  return {
    slug,
    frontmatter: data,
    content,
  };
}
```

## 상세 페이지

MDX를 HTML로 렌더링하기 위해 사용하는 라이브러리가 **next-mdx-remote 입니다.**
React 컴포넌트, 코드 블록과 같은 기능을 사용하기 위해 필수입니다.

### ✔ 설치 명령어

```bash
npm install next-mdx-remote
```

### ✔ 렌더링 컴포넌트

```tsx
// components/posts/post-detail/PostContent.tsx
import { MDXRemote } from 'next-mdx-remote/rsc';

export default function PostContent({ content }: { content: string }) {
  return <MDXRemote source={content} />;
}
```

## Tailwind Typography 플러그인 적용하기

`@tailwindcss/typography`는 MDX 기반 블로그에서 거의 필수로 사용하는 플러그인입니다.
본문을 문서 스타일에 맞게 렌더링해주는 역할을 합니다.

### ✔ 설치 명령어

```bash
npm install @tailwindcss/typography
```

`globals.css`에 아래 코드를 추가해서 플러그인을 불러옵니다.
(tailwind v4에서는 기본적으로 tailwind.config.js 파일이 없습니다.)

```jsx
// app/globals.css
@plugin "@tailwindcss/typography";
```

### ✔ 사용 방법

실제 렌더링 컴포넌트에서 본문을 감싸는 컨테이너에 `prose` 클래스를 추가합니다.

```tsx
<article className="prose prose-lg">
  <PostContent content={content} />
</article>
```

- `prose-lg` → 글자 크기 확대

추가로

- Github 스타일 마크다운
- 줄바꿈 자동 처리
- 코드블럭 하이라이팅

이런 기능은 **remark/rehype 플러그인을 추가**해야 가능합니다.

### ✔ 설치 명령어

```jsx
npm install remark-gfm remark-breaks rehype-pretty-code rehype-slug
```

저는 MDX 렌더링과 관련된 옵션을 별도로 **/lib/mdxOptions.ts** 파일에 관리했습니다.
MDX 렌더링 시 사용할 플러그인들을 정의하는 역할을 합니다.

```jsx
// lib/mdxOptions.ts
import type { MDXRemoteProps } from 'next-mdx-remote/rsc';
import type { Pluggable } from 'unified';
import remarkGfm from 'remark-gfm';
import remarkBreaks from 'remark-breaks';
import rehypePrettyCode from 'rehype-pretty-code';

export const mdxOptions: MDXRemoteProps['options'] = {
  mdxOptions: {
    remarkPlugins: [remarkGfm, remarkBreaks],
    rehypePlugins: [
      [rehypePrettyCode, { theme: 'one-dark-pro', keepBackground: true }],
      rehypeSlug,
    ] as Pluggable[],
  },
};
```

| 기능                    | 플러그인           |
| ----------------------- | ------------------ |
| GFM(체크박스/표/취소선) | remark-gfm         |
| 헤더 id 자동 생성       | rehype-slug        |
| 코드 하이라이트         | rehype-pretty-code |
| 줄바꿈 자동 처리        | remark-breaks      |

## 글 목록 만들기

최신순으로 정렬해서 홈페이지에서 보여주도록 구현했습니다.

- `CONTENT_DIR`은 MDX파일들이 저장된 경로입니다. 여러 코드에서 쓰이기 때문에 상수로 분리했습니다.
- `getAllPosts` 함수는 content 폴더 안에 있는 모든 파일명을 읽어 옵니다.
  - .mdx 확장자를 제거해 slug를 만듭니다.
  - fs.readFileSync로 MDX 파일 내용을 읽고, gray-matter 라이브러리로 frontmatter (메타데이터) 영역을 파싱해서 data 객체로 가져옵니다.
  - slug, title, date, thumbnail, categories, description 등의 필드 정보를 포함한 게시물 객체를 반환합니다.

```jsx
// lib/posts.ts
const CONTENT_DIR = path.join(process.cwd(), 'content');

export function getAllPosts() {
  const files = fs.readdirSync(CONTENT_DIR);

  return files
    .map((file) => {
      const slug = file.replace(/\\.mdx$/, '');
      const { data } = matter(
        fs.readFileSync(path.join(CONTENT_DIR, file), 'utf8'),
      );

      return {
        id: slug,
        slug,
        title: data.title,
        date: data.date,
        thumbnail: data.thumbnail,
        categories: data.categories,
        description: data.description,
      };
    })
    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
}
```

이 데이터는 메인 페이지에서 리스트를 보여줄 때 `posts`로 사용됩니다.

```tsx {8}
// app/page.tsx
export default function Home() {
  const posts = getAllPosts();
  const categories = getAllCategories();

  return (
    <PostListPage
      posts={posts}
      categories={categories}
      totalPostCount={posts.length}
    />
  );
}
```
