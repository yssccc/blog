---
title: '하이드레이션(hydration)이란? (+트러블슈팅)'
date: '2025-11-09'
thumbnail: '/thumbnails/hydration.png'
categories: ['Next.js']
description: 'Next.js를 사용해보면서 마주쳤던 하이드레이션 에러에 대해 다룹니다.'
---

## 하이드레이션이란?

서버에서 미리 렌더링된 정적인 HTML 페이지를 클라이언트가 받아서 React의 자바스크립트 코드와 **서버가 생성한 HTML DOM을 연결하고 활성화하는 과정**을 의미합니다.

- 서버는 미리 완성된 HTML(내용, 구조)을 생성해 빠르게 전달합니다.
- 클라이언트는 전달받은 HTML에 React의 **이벤트 처리**, **상태 관리 기능**을 붙여서 동적인 SPA처럼 동작하도록 만듭니다.
- 이 과정에서 HTML과 자바스크립트 코드가 제대로 매칭되어야 하는데, 이걸 하이드레이션이라고 합니다.

### ✔ 비유

하이드레이션이란 **마치 건조된 꽃에 물을 주어 다시 살아나게 하는 과정**처럼,
서버가 준비한 정적 HTML에 React가 기능을 덧붙여 살아있는 페이지로 만드는 과정입니다.

## 왜 하이드레이션이 필요한가?

**1) 빠른 초기 로드**

- 서버에서 이미 구성된 HTML을 바로 전달하기 때문에, 사용자는 페이지가 즉시 그려지는 것을 볼 수 있습니다.
- 자바스크립트가 모두 다운로드되기 전에도 화면 구조가 먼저 나타나 **초기 체감 속도가 크게 올라갑니다.**

**2) 동적 상호작용 가능**

- 서버가 렌더링한 HTML은 정적 문서이기 때문에 **버튼 클릭, 폼 입력, 모달 열기** 같은 상호작용이 불가능합니다.
- 하이드레이션을 통해 클라이언트가 React 컴포넌트를 다시 초기화하며 이벤트 리스너와 상태(state)를 복원합니다.
- 그 결과 정적인 HTML이 **인터랙티브한 React 애플리케이션으로 활성화됩니다.**

**3) SEO 개선**

- 서버사이드 렌더링된 HTML은 검색 엔진이 즉시 읽을 수 있어 **SEO에 매우 유리합니다.**
- 하이드레이션을 결합하면 **검색 엔진 친화적인 SSR + 사용자 친화적인 React 인터랙션** 두 가지를 모두 얻을 수 있습니다.

## 하이드레이션 에러란?

서버와 클라이언트의 HTML 구조가 불일치할 때 일어나는 문제입니다.
서버가 렌더링한 것과 클라이언트가 재렌더링하는 내용이 다르면 오류가 생기는 것입니다.

## 트러블슈팅

### ✔ 문제상황

헤더와 푸터 ui작업을 완료하고 이를 layout.tsx파일에 넣자마자 오류가 생겼습니다.

```tsx
import Header from '@/components/layout/Header';
import './globals.css';
import Footer from '@/components/layout/Footer';

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="ko">
      <Header />
      <main>{children}</main>
      <Footer />
    </html>
  );
}
```

### ✔ 해결 방법

Next.js 앱의 루트 레이아웃은 반드시 `<html>` 내에 `<body>`를 포함시키고, UI 컴포넌트들은 `<body>` 내부에 배치해야합니다.

위 코드를 아래와 같이 body내부에 넣으니 해결되었습니다.

```tsx
<html lang="ko">
  <body>
    <Header />
    <main>{children}</main>
    <Footer />
  </body>
</html>
```

### ✔ 원인 분석

```jsx
<html>
  <Header />
  <main>...</main>
  <Footer />
</html>
```

위 코드는 브라우저가 아래와 같이 보정합니다.

```jsx
<html>
  <head></head>
  <body>
    <Header />
    <main>...</main>
    <Footer />
  </body>
</html>
```

이 과정에서 브라우저가 렌더링한 HTML과 React가 기대하는 HTML 구조가 **서로 다르게 되어 하이드레이션 문제가 생깁니다.**

## 참고 자료

- https://helloinyong.tistory.com/315
- https://disco-biscuit.tistory.com/115
